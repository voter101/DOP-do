var App,Glue,Gui,Task,TasksList,TasksListBackend,TasksListOrdering,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp={}.hasOwnProperty;App=function(){function a(){var a,b,c,d,e;e=new TasksList,b=new Gui,c=new TasksListBackend,d=new TasksListOrdering,a=new Glue(e,b,c,d),e.start()}return a}(),Task=function(){function a(a,b){this.id=a,this.content=b}return a}(),Glue=function(){function a(a,b,c,d){var e=this;this.useCase=a,this.gui=b,this.tasksBackend=c,this.tasksOrdering=d,After(this.useCase,"start",function(){return e.gui.showTaskList()}),After(this.useCase,"start",function(){return e.tasksBackend.getTasks()}),After(this.useCase,"addedTask",function(a){return e.gui.appendTask(a)}),After(this.useCase,"removedTask",function(a){return e.gui.removeTask(a)}),After(this.tasksBackend,"tasksFetched",function(a){return e.gui.setTasks(a)}),After(this.tasksBackend,"taskAdded",function(a){return e.useCase.addTask(a)}),After(this.tasksBackend,"taskRemoved",function(a){return e.useCase.removeTask(a)}),After(this.gui,"taskSubmitted",function(a){return e.tasksBackend.addTask(a)}),After(this.gui,"removeTaskClicked",function(a){return e.tasksBackend.removeTask(a)}),LogAll(this.useCase),LogAll(this.gui),LogAll(this.tasksBackend),LogAll(this.tasksOrdering)}return a}(),Gui=function(){function a(){this.removeTaskClicked=__bind(this.removeTaskClicked,this),this.taskSubmitted=__bind(this.taskSubmitted,this),this.taskSubmit=__bind(this.taskSubmit,this),this.removeTaskClick=__bind(this.removeTaskClick,this),this.removeTask=__bind(this.removeTask,this),this.appendTask=__bind(this.appendTask,this),this.setTasks=__bind(this.setTasks,this),this.showTaskList=__bind(this.showTaskList,this),this.createElementFor=__bind(this.createElementFor,this)}return a.prototype.createElementFor=function(a,b){var c,d,e,f;return e=$(a).html(),f=Handlebars.compile(e),d=f(b),c=$(d)},a.prototype.showTaskList=function(){var a,b;return b=this.createElementFor("#TasksListTemplate"),a=this.createElementFor("#TaskForm"),$(".main").append(b),$(".main").append(a),a.submit(this.taskSubmit),$(".tasksList").on("click",".removeTask",this.removeTaskClick)},a.prototype.setTasks=function(a){var b=this;return $(".tasksList div").empty(),a.map(function(a){return b.appendTask(a)})},a.prototype.appendTask=function(a){var b;return b=this.createElementFor("#TaskTemplate",a),$(".tasksList").append(b)},a.prototype.removeTask=function(a){return console.log(a),$(".tasksList .task[data-taskId="+a+"]").slideUp()},a.prototype.removeTaskClick=function(a){var b;return b=$(a.target).attr("data-taskId"),this.removeTaskClicked(b)},a.prototype.taskSubmit=function(a){var b,c;a.preventDefault(),c=$(a.target).find("[name=content]"),b=c.val(),c.val("");if(b.length>3)return this.taskSubmitted(b)},a.prototype.taskSubmitted=function(a){},a.prototype.removeTaskClicked=function(a){},a}(),TasksList=function(){function a(){this.removedTask=__bind(this.removedTask,this),this.removeTask=__bind(this.removeTask,this),this.taskNotAdded=__bind(this.taskNotAdded,this),this.taskAdded=__bind(this.taskAdded,this),this.addTask=__bind(this.addTask,this),this.start=__bind(this.start,this),this.tasks=[]}return a.prototype.start=function(){},a.prototype.addTask=function(a){return this.tasks[a.id]=a,this.taskAdded(a)},a.prototype.taskAdded=function(a){return a},a.prototype.taskNotAdded=function(){return console.warn("Failed to add task")},a.prototype.removeTask=function(a){return this.tasks.remove(function(b){return parseInt(b.id)===parseInt(a)}),this.removedTask(a)},a.prototype.removedTask=function(a){},a}(),TasksListBackend=function(){function a(){this.taskRemoved=__bind(this.taskRemoved,this),this.tasksFetched=__bind(this.tasksFetched,this),this.taskAdded=__bind(this.taskAdded,this),this.removeTask=__bind(this.removeTask,this),this.addTask=__bind(this.addTask,this),this.getTasks=__bind(this.getTasks,this),this.tasks=[{id:1,content:"alfsdlkjfsljkfsdlkjfsdljkfsd"},{id:2,content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec vitae molestie leo, sed condimentum risus. Phasellus auctor posuere nisi eu gravida. Ut euismod feugiat ipsum, vel auctor lorem congue ut. Ut cursus nisl non dictum fringilla. Integer at cursus urna."}]}return a.prototype.getTasks=function(){return this.tasksFetched(this.tasks)},a.prototype.addTask=function(a){var b;return b={id:3,content:a},this.tasks.add(b),this.taskAdded(b)},a.prototype.removeTask=function(a){return this.tasks.remove(function(b){return parseInt(b.id)===parseInt(a)}),this.taskRemoved(a)},a.prototype.taskAdded=function(a){},a.prototype.tasksFetched=function(a){},a.prototype.taskRemoved=function(a){},a}(),TasksListOrdering=function(){function a(){this.changeOrder=__bind(this.changeOrder,this),this.tasksOrder=[]}return a.prototype.changeOrder=function(a){this.tasksOrder=a},a}(),toast("./",{bare:!0,packaging:!0,httpfolder:"../",release:"../app.js",debug:"../app-debug.js"}),_.defaults(this,{Before:function(a,b,c){return YouAreDaBomb(a,b).before(c)},BeforeAnyCallback:function(a,b,c){return YouAreDaBomb(a,b).beforeAnyCallback(c)},After:function(a,b,c){return YouAreDaBomb(a,b).after(c)},Around:function(a,b,c){return YouAreDaBomb(a,b).around(c)},AfterAll:function(a,b,c){var d,e,f,g;g=[];for(e=0,f=b.length;e<f;e++)d=b[e],g.push(After(a,d,c));return g},LogAll:function(a){var b,c,d;d=[];for(b in a){if(!__hasProp.call(a,b))continue;c=a[b],_.isFunction(c)?d.push(function(b){return Before(a,b,function(){return console.log("calling: "+b)})}(b)):d.push(void 0)}return d},AutoBind:function(a,b){var c,d,e;e=[];for(c in a)d=a[c],_.isFunction(d)?e.push(function(c){if(c.endsWith("Clicked")&&b[c.remove("Clicked")])return After(a,c,function(a){return b[c.remove("Clicked")](a)})}(c)):e.push(void 0);return e}})